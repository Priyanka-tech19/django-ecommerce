
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/static/shop/main.js"></script>

    <link rel="stylesheet" href="/static/shop/style.css">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <h1>Shopping Cart</h1>
        <div id="cart-items" class="row">
            <div id="item_list"></div>
        </div>   
         <a id="checkout-link" class="btn atc btn-warning" href="/checkout.html">Checkout</a>   
    </div>
    

    <script type="text/javascript">
       /* $(document).ready(function () {
            // Retrieve cart data from localStorage or initialize an empty object if null
            var cart = JSON.parse(localStorage.getItem('cart')) || {};
        
            // Log the retrieved cart data for debugging
            console.log("Cart contents:", cart);
        
            // Initialize total price variable
            var total = 0;
        
            // Iterate over each item in the cart
            for (var itemId in cart) {
                if (cart.hasOwnProperty(itemId)) {
                    var item = cart[itemId];
                    var name = item[1];
                    var quantity = item[0];
                    var price = parseFloat(item[2]); // Parse price as a float
                    
                    var imageUrl = item[3]; 
        
                    // Log each item and its details for debugging
                    console.log("Item:", name);
                    console.log("Quantity:", quantity);
                    console.log("Price:", parseFloat(price));
                    console.log("Image URL:", imageUrl)
        
        
                    // Check if the price is valid (not null or undefined)
                    if (price !== null && price !== undefined) {
                        // Calculate the total price for each item and accumulate it
                        var totalPriceForItem  = price;
                        total += totalPriceForItem
        
        
        
                        // Create HTML string for each item with its price and image-
                        
                        // Calculate the cost per item
                        //var totalPriceForItem  = price; // Assuming price is the price of one item
                       
                        var costPerItem = totalPriceForItem/quantity;
                         // Create HTML string for each item with its price and image
                       
                        var itemString = `<div class="item-box">
                           
                                <div class="d-flex align-items-center">
                                    <img src="${imageUrl}"  class="mr-3" style="width: 150px; height: 125px;">
                                    <div>
                                        <span class="item-name">${name}</span><br>
                              
                                        <span class="price">  ₹${costPerItem.toFixed(2)} </span>
                                        <br>
                                        <span class="quantity">Qty: ${quantity} </span>
                                        <br>
                                        <span class="total-price">${totalPriceForItem.toFixed(2)}₹</span>
                                    </div>
                                </div>
                            
                            </div>`;

                       
                        $('#item_list').append(itemString);
                    } else {
                        // Log an error if the price is invalid
                        console.error("Invalid price for item:", name);
                    }
                }
            }
        
            // Format the total to have two decimal places
            const formattedTotal = total.toFixed(2);
        
            // Log the total price for debugging
            console.log("Total:", formattedTotal);
        
        
        
        
        
            // Create HTML for the total price display
            var totalPriceHTML = `<li class="list-group-item d-flex justify-content-between align-items-center"><b>Your Total </b><b> ${formattedTotal} ₹</b></li>`;
        
            // Set the total price value and display it on the page
            $('#total').text(formattedTotal + '₹'); //displayed total amount with Rupees sign
            $('#total').val(formattedTotal + '₹');
            console.log("Total value set to #total:", formattedTotal);
            $('#item_list').append(totalPriceHTML);
            console.log("Item appended to #item_list:", totalPriceHTML);


             // Redirect to checkout page with total price as a query parameter
            //window.location.href = '/checkout.html?total=' + formattedTotal;

             // Store the total value in localStorage before redirecting
            localStorage.setItem('total', formattedTotal);
            
        
            // Update the 'items' input field with the JSON representation of the cart
            $('#items').val(JSON.stringify(cart));
        
            // Submit event listener for the form
            $('#order-form').submit(function (event) {
                // Prevent the form from submitting if validation fails
                if (!validateForm()) {
                    event.preventDefault();
                }
            });
        });
*/
    </script>
            
        
        
        
            
  
</body>
</html>